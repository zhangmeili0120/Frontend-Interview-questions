#### 18. vue-router导航钩子有哪些？

- 哪几种
- 能做什么
- 怎么用



###### 三种导航守卫

1. 全局守卫

   - beforeEach(to, from, next) {} 前置守卫，用来改变导航路由

     - 参数：to 即将进入的目标的路由对象，from 离开的路由对象，next导航函数，根据参数控制路由目标
     - next的参数

     ​	next() // 正常导航

     ​	next(false) // 取消导航

     ​	next('/xx') //中断当前导航，指向xx导航

     ​	next(error) //参数是个error实例，导航被中止，且错误传给router.onError()

   - beforeResolve(to, from, next) {} 2.5+,

     - 和beforeEach用法类似，调用时机不同：在所有异步路由组件被解析后，组件内前置守卫调用后，导航确认前调用

   - afterEach(to, from){} 全局后置钩子

     - 没有next参数，不能改变导航
     - 常用来改变滚动条位置，如返回页面顶端

2. 路由独享守卫

   - router.beforeEnter(to, from, next) {}

3. 组件内守卫

   - 前置 router.beforeRouteEnter(to, from, next){}

     - 导航未被确认，组件实例未创建，故而不能访问到组件实例

   - 后置router.beforeRouteLeave(to, from, next){}

     - 可以访问组件实例

   - 复用组件更新 router.beforeRouterUpdate(to, from, next) {} (2.2.0+)

     ​	可以访问组件实例，复用组件可以获取组件参数变化



###### 完整的导航解析流程

1.导航被触发 

2.失活的组件里调用beforeRouteLeave 守卫 

3.调用全局beforEach守卫 

4.重用的组件调用beforeRouteUpdate守卫 （2.2.0+）

5.路由配置里调用beforeEnter

6.解析异步路由组件。

7.被激活的组件里调用beforeRouteEnter

8.调用全局beforeResolve守卫 （2.5+）

9.导航被确认

10.调用全局afterEach守卫

11.触发DOM更新

12.创建好的实例调用beforeRouteEnter守卫中传给next的回调函数。